exports.id=735,exports.ids=[735],exports.modules={21331:(e,r,s)=>{"use strict";s.d(r,{AuthForm:()=>j});var t=s(45781),a=s(13072),i=s(7439),n=s(28328),o=s.n(n),l=s(22752);let c=(0,l.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),d=(0,l.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=s(12710),u=s(44238),h=s(14132),p=s(43030),x=s(14784),g=s(73342),f=s(42184),v=s(77001);let w=(0,v.createServerReference)("60e4619786938df91bf8c2db67ade356549385d02b",v.callServer,void 0,v.findSourceMapURL,"sendVerificationEmailAction");s(10739);var y=s(82662);function j({type:e}){let r=(0,i.useRouter)(),{toast:s}=(0,g.dj)(),{t:n}=(0,y.o)(),[l,v]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[N,k]=(0,a.useState)(!1),[S,A]=(0,a.useState)({name:"",email:"",password:"",confirmPassword:""}),[E,F]=(0,a.useState)(null),P=e=>{let{name:r,value:s}=e.target;A(e=>({...e,[r]:s}))},C=async t=>{if(t.preventDefault(),v(!0),!E){s({title:"Error",description:"Database not initialized. Please try again.",variant:"destructive"}),v(!1);return}try{if("signup"===e&&S.password!==S.confirmPassword)throw Error("Passwords do not match");if(console.log("Form Data:",S),"signup"===e){if((await E.getUsers()).find(e=>e.email===S.email))throw Error("Email already in use");let e={id:Math.random().toString(36).substring(2,15),email:S.email,password:S.password,role:"user",emailVerified:!1};E.addUser(e);let t=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);if(!(await w(S.email,t)).success)throw Error("Failed to send verification email. Please try again.");k(!0),s({title:"Verification email sent",description:"Please check your email to verify your account."}),r.push("/verify-email");return}{console.log("Form Data:",S);let e=(await E.getUsers()).find(e=>e.email===S.email);if(console.log("User found:",e),!e){console.log("No user found with this email."),s({title:"Login Failed",description:"No user found with this email.",variant:"destructive"});return}if(console.log("Comparing passwords:",S.password,e.password),e.password!==S.password){console.log("Incorrect password."),s({title:"Login Failed",description:"Incorrect password.",variant:"destructive"});return}(0,f.Ee)(e.email,e.role);let t=(0,f.qc)();if(s({title:"Logged in successfully",description:`Welcome back to Acting Europe${t?" as Administrator":""}!`}),t){r.push("/admin");return}r.push("/");return}}catch(e){s({title:"Error",description:e instanceof Error?e.message:"Something went wrong",variant:"destructive"})}finally{v(!1)}};return N?(0,t.jsxs)(x.Zp,{className:"mx-auto w-full max-w-md border-primary-gold/20 shadow-md",children:[(0,t.jsxs)(x.aR,{children:[(0,t.jsx)(x.ZB,{className:"text-2xl font-bold text-secondary-blue",children:"Verification Email Sent"}),(0,t.jsx)(x.BT,{children:"Please check your email to complete your registration"})]}),(0,t.jsxs)(x.Wu,{className:"text-center",children:[(0,t.jsx)("div",{className:"mb-6 rounded-full bg-green-100 p-3 inline-block",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("p",{className:"mb-4",children:["We've sent a verification email to ",(0,t.jsx)("strong",{children:S.email})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"Please click the verification link in the email to complete your registration. The link will expire in 24 hours."}),(0,t.jsx)(u.$,{variant:"outline",onClick:()=>r.push("/"),children:"Return to Home"}),(0,t.jsx)(u.$,{variant:"destructive",onClick:()=>E?.clearAllData(),className:"mt-4",children:"Clear All Data (for testing)"})]}),(0,t.jsx)(x.wL,{className:"flex flex-col space-y-4",children:(0,t.jsxs)("div",{className:"text-center text-sm",children:["Didn't receive the email?"," ",(0,t.jsx)("button",{className:"font-medium text-primary-gold hover:underline",onClick:async()=>{v(!0);try{let e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);await w(S.email,e),s({title:"Verification email resent",description:"Please check your email to verify your account."})}catch(e){s({title:"Error",description:"Failed to resend verification email. Please try again.",variant:"destructive"})}finally{v(!1)}},disabled:l,children:l?"Sending...":"Resend verification email"})]})})]}):(0,t.jsxs)(x.Zp,{className:"mx-auto w-full max-w-md border-primary-gold/20 shadow-md",children:[(0,t.jsxs)(x.aR,{children:[(0,t.jsx)(x.ZB,{className:"text-2xl font-bold text-secondary-blue",children:"login"===e?"Sign In":"Create Account"}),(0,t.jsx)(x.BT,{children:"login"===e?"Enter your credentials to access your account":"Register to book tickets and access exclusive content"})]}),(0,t.jsx)(x.Wu,{children:(0,t.jsxs)("form",{onSubmit:C,className:"space-y-4",children:["signup"===e&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"name",children:"Full Name"}),(0,t.jsx)(h.p,{id:"name",name:"name",placeholder:"John Doe",value:S.name,onChange:P,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(h.p,{id:"email",name:"email",type:"email",placeholder:"you@example.com",value:S.email,onChange:P,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"password",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{id:"password",name:"password",type:j?"text":"password",placeholder:"••••••••",value:S.password,onChange:P,required:!0}),(0,t.jsxs)(u.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0",onClick:()=>b(!j),children:[j?(0,t.jsx)(c,{className:"h-4 w-4"}):(0,t.jsx)(d,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:j?"Hide password":"Show password"})]})]})]}),"signup"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,t.jsx)(h.p,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"••••••••",value:S.confirmPassword,onChange:P,required:!0})]}),(0,t.jsx)("p",{className:"text-[0.5rem] text-muted-foreground text-center mt-4",children:n("signupDisclaimer")})]}),(0,t.jsx)(u.$,{type:"submit",className:"w-full",disabled:l,children:l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"login"===e?"Signing in...":"Creating account..."]}):"login"===e?"Sign In":"Create Account"})]})}),(0,t.jsx)(x.wL,{className:"flex flex-col space-y-4",children:(0,t.jsx)("div",{className:"text-center text-sm",children:"login"===e?(0,t.jsxs)(t.Fragment,{children:["Don't have an account?"," ",(0,t.jsx)(o(),{href:"/auth/signup",className:"font-medium text-primary-gold hover:underline",children:"Sign up"})]}):(0,t.jsxs)(t.Fragment,{children:["Already have an account?"," ",(0,t.jsx)(o(),{href:"/auth/login",className:"font-medium text-primary-gold hover:underline",children:"Sign in"})]})})})]})}},51431:(e,r,s)=>{Promise.resolve().then(s.bind(s,76231)),Promise.resolve().then(s.t.bind(s,87846,23))},75327:(e,r,s)=>{"use strict";s.r(r),s.d(r,{"60e4619786938df91bf8c2db67ade356549385d02b":()=>i});var t=s(1829);s(70129);var a=s(95811);async function i(e,r){return await (0,a.kH)(e,r)}(0,s(64297).D)([i]),(0,t.A)(i,"60e4619786938df91bf8c2db67ade356549385d02b",null)},76231:(e,r,s)=>{"use strict";s.d(r,{AuthForm:()=>t});let t=(0,s(51129).registerClientReference)(function(){throw Error("Attempted to call AuthForm() from the server but AuthForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\ActingEurope\\ActingEurope_dev\\components\\auth\\auth-form.tsx","AuthForm")},81695:(e,r,s)=>{Promise.resolve().then(s.bind(s,21331)),Promise.resolve().then(s.t.bind(s,28328,23))},87846:(e,r,s)=>{let{createProxy:t}=s(91614);e.exports=t("D:\\ActingEurope\\ActingEurope_dev\\node_modules\\.pnpm\\next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0\\node_modules\\next\\dist\\client\\app-dir\\link.js")}};