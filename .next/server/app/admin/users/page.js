(()=>{var e={};e.id=733,e.ids=[733],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14132:(e,r,t)=>{"use strict";t.d(r,{p:()=>i});var s=t(45781),a=t(13072),l=t(77401);let i=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));i.displayName="Input"},15453:(e,r,t)=>{Promise.resolve().then(t.bind(t,59140))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32224:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(7025),a=t(18198),l=t(82576),i=t.n(l),n=t(45239),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d={children:["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,95646)),"D:\\ActingEurope\\ActingEurope_dev\\ActingEurope_dev\\app\\admin\\users\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,59650)),"D:\\ActingEurope\\ActingEurope_dev\\ActingEurope_dev\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,53117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,6874,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["D:\\ActingEurope\\ActingEurope_dev\\ActingEurope_dev\\app\\admin\\users\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33873:e=>{"use strict";e.exports=require("path")},36404:(e,r,t)=>{"use strict";t.d(r,{b:()=>n});var s=t(13072),a=t(48597),l=t(45781),i=s.forwardRef((e,r)=>(0,l.jsx)(a.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var n=i},43030:(e,r,t)=>{"use strict";t.d(r,{Label:()=>d});var s=t(45781),a=t(13072),l=t(36404),i=t(87990),n=t(77401);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(l.b,{ref:t,className:(0,n.cn)(o(),e),...r}));d.displayName=l.b.displayName},48414:(e,r,t)=>{"use strict";t.d(r,{bq:()=>p,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>u});var s=t(45781),a=t(13072),l=t(7481),i=t(71776),n=t(48613),o=t(28108),d=t(77401);let c=l.bL;l.YJ;let u=l.WT,p=a.forwardRef(({className:e,children:r,...t},a)=>(0,s.jsxs)(l.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[r,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=l.l9.displayName;let m=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(l.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})}));m.displayName=l.PP.displayName;let x=a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(l.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})}));x.displayName=l.wn.displayName;let h=a.forwardRef(({className:e,children:r,position:t="popper",...a},i)=>(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:[(0,s.jsx)(m,{}),(0,s.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})}));h.displayName=l.UC.displayName,a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(l.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r})).displayName=l.JU.displayName;let f=a.forwardRef(({className:e,children:r,...t},a)=>(0,s.jsxs)(l.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),(0,s.jsx)(l.p4,{children:r})]}));f.displayName=l.q7.displayName,a.forwardRef(({className:e,...r},t)=>(0,s.jsx)(l.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...r})).displayName=l.wv.displayName},59140:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(45781),a=t(13072),l=t(7439),i=t(42184),n=t(14132),o=t(44238),d=t(43030),c=t(48414);let u=()=>{let[e,r]=(0,a.useState)([]),[t,u]=(0,a.useState)(!0),[p,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[b,y]=(0,a.useState)("client"),j=(0,l.useRouter)(),v=async()=>{try{let e=localStorage.getItem("actingEurope_userRole");console.log("Client-side User Role from localStorage:",e),console.log("Sending Authorization header:",`Bearer ${e}`);let t=await fetch("/api/users",{headers:{Authorization:`Bearer ${e}`}});if(!t.ok){let e=await t.text();throw console.error("API Error Response:",e),Error(`HTTP error! status: ${t.status} - ${e}`)}let s=await t.json();console.log("Received data from /api/users:",s),r(Array.isArray(s)?s:s.users||[])}catch(e){m(e.message)}finally{u(!1)}};(0,a.useEffect)(()=>{if(!(0,i.wR)()||!(0,i.qc)()){j.push("/login");return}v()},[j,v]);let w=async(t,s)=>{try{let a=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("actingEurope_userRole")}`},body:JSON.stringify({id:t,newRole:s})});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let l=await a.json();r(e.map(e=>e.id===t?l:e))}catch(e){m(e.message)}},N=async t=>{if(confirm("Are you sure you want to delete this user?"))try{let s=await fetch("/api/users",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("actingEurope_userRole")}`},body:JSON.stringify({id:t})});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);r(e.filter(e=>e.id!==t))}catch(e){m(e.message)}};if(t)return(0,s.jsx)("div",{className:"text-center py-10",children:"Loading users..."});if(p)return(0,s.jsxs)("div",{className:"text-center py-10 text-red-500",children:["Error: ",p]});let A=async e=>{e.preventDefault(),m(null);try{let e=await fetch("/api/users/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("actingEurope_userRole")}`},body:JSON.stringify({email:x,password:f,role:b})});if(!e.ok){let r=await e.json();throw Error(r.message||`HTTP error! status: ${e.status}`)}h(""),g(""),y("client"),v()}catch(e){m(e.message)}};return(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"User Management"}),(0,s.jsxs)("div",{className:"mb-8 p-6 border rounded-lg shadow-sm bg-white",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Add New User"}),(0,s.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"newUserEmail",children:"Email"}),(0,s.jsx)(n.p,{id:"newUserEmail",type:"email",value:x,onChange:e=>h(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"newUserPassword",children:"Password"}),(0,s.jsx)(n.p,{id:"newUserPassword",type:"password",value:f,onChange:e=>g(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Label,{htmlFor:"newUserRole",children:"Role"}),(0,s.jsxs)(c.l6,{value:b,onValueChange:e=>y(e),children:[(0,s.jsx)(c.bq,{className:"w-[180px]",children:(0,s.jsx)(c.yv,{placeholder:"Select a role"})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"client",children:"Client"},"client"),(0,s.jsx)(c.eb,{value:"seller",children:"Seller"},"seller"),(0,s.jsx)(c.eb,{value:"admin",children:"Admin"},"admin")]})]})]}),(0,s.jsx)(o.$,{type:"submit",children:"Add User"})]})]}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Existing Users"}),(0,s.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden",children:[(0,s.jsx)("thead",{className:"bg-gray-200 text-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Email"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Role"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Created At"}),(0,s.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)(c.l6,{value:e.role,onValueChange:r=>w(e.id,r),disabled:"super_admin"===e.role,children:[(0,s.jsx)(c.bq,{className:"w-[120px]",children:(0,s.jsx)(c.yv,{placeholder:e.role})}),(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(c.eb,{value:"client",children:"Client"},"client"),(0,s.jsx)(c.eb,{value:"seller",children:"Seller"},"seller"),(0,s.jsx)(c.eb,{value:"admin",children:"Admin"},"admin"),"super_admin"===e.role&&(0,s.jsx)(c.eb,{value:"super_admin",children:"Super Admin"},"super_admin")]})]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:new Date(e.createdAt).toLocaleDateString()}),(0,s.jsx)("td",{className:"py-3 px-4",children:"super_admin"!==e.role&&(0,s.jsx)(o.$,{onClick:()=>N(e.id),className:"bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600",children:"Delete"})})]},e.id))})]})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71485:(e,r,t)=>{Promise.resolve().then(t.bind(t,95646))},95646:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(51129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\ActingEurope\\\\ActingEurope_dev\\\\ActingEurope_dev\\\\app\\\\admin\\\\users\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\ActingEurope\\ActingEurope_dev\\ActingEurope_dev\\app\\admin\\users\\page.tsx","default")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[915,872,654,302,794],()=>t(32224));module.exports=s})();