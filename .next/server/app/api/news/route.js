(()=>{var e={};e.id=635,e.ids=[635],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4761:()=>{},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15221:(e,t,a)=>{"use strict";a.r(t),a.d(t,{patchFetch:()=>p,routeModule:()=>g,serverHooks:()=>b,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>h});var s={};a.r(s),a.d(s,{DELETE:()=>f,GET:()=>d,POST:()=>u,PUT:()=>l});var n=a(44713),r=a(18198),i=a(84557),c=a(34216),o=a(61768);async function d(){try{let e=await (0,c.RJ)();return o.NextResponse.json(e)}catch(e){return console.error("Error fetching news articles:",e),o.NextResponse.json({message:"Error fetching news articles"},{status:500})}}async function u(e){try{let{title:t,excerpt:a,imageUrl:s,date:n,category:r}=await e.json();if(!t||!a||!s||!n||!r)return o.NextResponse.json({message:"Missing required fields"},{status:400});let i=await (0,c.Uf)(t,a,a,"Admin",n,r,s);return o.NextResponse.json(i,{status:201})}catch(e){return console.error("Error creating news article:",e),o.NextResponse.json({message:"Error creating news article"},{status:500})}}async function l(e){try{let{id:t,title:a,excerpt:s,imageUrl:n,date:r,category:i}=await e.json();if(!t||!a||!s||!n||!r||!i)return o.NextResponse.json({message:"Missing required fields"},{status:400});let d=await (0,c.$o)(t,{title:a,excerpt:s,imageUrl:n,date:r,category:i});if(!d)return o.NextResponse.json({message:"News article not found"},{status:404});return o.NextResponse.json(d)}catch(e){return console.error("Error updating news article:",e),o.NextResponse.json({message:"Error updating news article"},{status:500})}}async function f(e){try{let{id:t}=await e.json();if(!t)return o.NextResponse.json({message:"Missing article ID"},{status:400});if(!await (0,c.$b)(t))return o.NextResponse.json({message:"News article not found"},{status:404});return o.NextResponse.json({message:"News article deleted successfully"})}catch(e){return console.error("Error deleting news article:",e),o.NextResponse.json({message:"Error deleting news article"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/news/route",pathname:"/api/news",filename:"route",bundlePath:"app/api/news/route"},resolvedPagePath:"D:\\ActingEurope\\ActingEurope_dev\\app\\api\\news\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:w,workUnitAsyncStorage:h,serverHooks:b}=g;function p(){return(0,i.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:h})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},34216:(e,t,a)=>{"use strict";a.d(t,{$b:()=>w,$o:()=>g,RJ:()=>l,Uf:()=>f,hG:()=>u,ht:()=>c,kg:()=>o,lf:()=>h,lo:()=>i,v_:()=>d});var s=a(51572);a(23680);var n=a(99841),r=a(47608);async function i(){return n.V.getInstance().getUsers()}async function c(e){let t=n.V.getInstance();return(await t.getUsers()).find(t=>t.email===e)}let o=async(e,t,a)=>{let s=n.V.getInstance();if((await s.getUsers()).find(t=>t.email===e))throw Error("User with this email already exists.");let r={id:Date.now().toString(),email:e,password:t,role:a,createdAt:new Date().toISOString()};return s.addUser(r),r};async function d(e,t){let a=n.V.getInstance(),s=await a.getUsers(),r=s.findIndex(t=>t.id===e);if(-1===r)throw Error("User not found");return a.updateUser(e,{...s[r],role:t}),{...s[r],role:t}}async function u(e){return n.V.getInstance().deleteUser(e)}let l=async()=>n.V.getInstance().getNews(),f=async(e,t,a,s,r)=>{let i=n.V.getInstance(),c={id:Date.now().toString(),title:e,excerpt:t,imageUrl:a,date:s,category:r};return i.addNews(c),c},g=async(e,t)=>n.V.getInstance().updateNews(e,t),w=async e=>n.V.getInstance().deleteNews(e),h=async(e,t)=>{let a=n.V.getInstance();if((await a.getUsers()).find(e=>"super_admin"===e.role))throw Error("Super admin already exists.");let s={id:Date.now().toString(),email:e,password:t,role:"super_admin",createdAt:new Date().toISOString()};return a.addUser(s),s};(0,r.D)([i,c,o,d,u,l,f,g,w,h]),(0,s.A)(i,"000519c7472e4a7a5d969a9281268201c7101b63f3",null),(0,s.A)(c,"40ab88234cecbf92ba18806b7213d9e84a7a7b6475",null),(0,s.A)(o,"7f82f0fdf53b15655bf9a25f2dead58c39c6a60bec",null),(0,s.A)(d,"60b39f1e45e6eff9b41bfa525f96e9fd2073d43967",null),(0,s.A)(u,"40bf3040db5185434d73b9a28fc9c8fe1f4b7394b6",null),(0,s.A)(l,"7f54e367f985d2c334fbe57596a38f04786a6e9936",null),(0,s.A)(f,"7f4ce80f15e31cc0be4c475dede4288ee289b17f5b",null),(0,s.A)(g,"7f9cb509710936944a7c191295e1035bcdc0fdf748",null),(0,s.A)(w,"7f134051c0adfced81222c294c31b20db1ef957560",null),(0,s.A)(h,"7fe401a0e42e2369799b14672b30f7e21b137215b2",null)},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68313:()=>{},96964:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"000519c7472e4a7a5d969a9281268201c7101b63f3":()=>s.lo,"40ab88234cecbf92ba18806b7213d9e84a7a7b6475":()=>s.ht,"40bf3040db5185434d73b9a28fc9c8fe1f4b7394b6":()=>s.hG,"60b39f1e45e6eff9b41bfa525f96e9fd2073d43967":()=>s.v_,"7f134051c0adfced81222c294c31b20db1ef957560":()=>s.$b,"7f4ce80f15e31cc0be4c475dede4288ee289b17f5b":()=>s.Uf,"7f54e367f985d2c334fbe57596a38f04786a6e9936":()=>s.RJ,"7f82f0fdf53b15655bf9a25f2dead58c39c6a60bec":()=>s.kg,"7f9cb509710936944a7c191295e1035bcdc0fdf748":()=>s.$o,"7fe401a0e42e2369799b14672b30f7e21b137215b2":()=>s.lf});var s=a(34216)},99841:(e,t,a)=>{"use strict";a.d(t,{V:()=>s,ds:()=>n});class s{constructor(){this.storageKey="actingEurope_database",this.initializeDatabase()}static getInstance(){return s.instance||(s.instance=new s),s.instance}initializeDatabase(){}async getData(){return console.log("getData method in DatabaseStorage called"),{events:[],venues:[],bookings:[],users:[],news:[],theatres:[]}}async saveData(e){}async getEvents(){return(await this.getData()).events||[]}async addEvent(e){let t=await this.getData();t.events.push(e),await this.saveData(t)}async updateEvent(e,t){let a=await this.getData(),s=a.events.findIndex(t=>t.id===e);-1!==s&&(a.events[s]=t,await this.saveData(a))}async deleteEvent(e){let t=await this.getData();t.events=t.events.filter(t=>t.id!==e),await this.saveData(t)}async getVenues(){return(await this.getData()).venues||[]}async addVenue(e){let t=await this.getData();t.venues.push(e),await this.saveData(t)}async updateVenue(e,t){let a=await this.getData(),s=a.venues.findIndex(t=>t.id===e);-1!==s&&(a.venues[s]=t,await this.saveData(a))}async deleteVenue(e){let t=await this.getData();t.venues=t.venues.filter(t=>t.id!==e),await this.saveData(t)}async getTheatres(){return(await this.getData()).theatres||[]}async addTheatre(e){let t=await this.getData();t.theatres.push(e),await this.saveData(t)}async updateTheatre(e,t){let a=await this.getData(),s=a.theatres.findIndex(t=>t.id===e);if(-1!==s)return a.theatres[s]={...a.theatres[s],...t},await this.saveData(a),a.theatres[s]}async deleteTheatre(e){let t=await this.getData();t.theatres=t.theatres.filter(t=>t.id!==e),await this.saveData(t)}async getBookings(){return(await this.getData()).bookings||[]}async addBooking(e){let t=await this.getData(),a={...e,id:t.bookings.length>0?Math.max(...t.bookings.map(e=>e.id))+1:1,bookingDate:new Date().toISOString()};return t.bookings.push(a),await this.saveData(t),a}async updateBooking(e){let t=await this.getData(),a=t.bookings.findIndex(t=>t.id===e.id);if(-1!==a)return t.bookings[a]={...t.bookings[a],...e},await this.saveData(t),t.bookings[a]}async deleteBooking(e){let t=await this.getData();t.bookings=t.bookings.filter(t=>t.id!==e),await this.saveData(t)}async getUsers(){return(await this.getData()).users||[]}async addUser(e){let t=await this.getData();t.users.push(e),await this.saveData(t)}async updateUser(e,t){let a=await this.getData(),s=a.users.findIndex(t=>t.id===e);-1!==s&&(a.users[s]={...a.users[s],...t},await this.saveData(a))}async createUser(e,t,a,s,n,r,i){try{if((await this.getUsers()).find(t=>t.email===e))throw Error("User already exists");let c={id:Date.now().toString(),email:e,password:t,firstName:a,lastName:s,role:n,emailNotifications:r,marketingPreferences:i,createdAt:new Date().toISOString()};return await this.addUser(c),c}catch(e){throw e}}async deleteUser(e){let t=await this.getData(),a=t.users.length;return t.users=t.users.filter(t=>t.id!==e),await this.saveData(t),t.users.length<a}async getNews(){return(await this.getData()).news||[]}async addNews(e){let t=await this.getData();t.news.push(e),await this.saveData(t)}async updateNews(e,t){let a=await this.getData(),s=a.news.findIndex(t=>t.id===e);if(-1!==s)return a.news[s]={...a.news[s],...t},await this.saveData(a),a.news[s]}async deleteNews(e){let t=await this.getData();t.news=t.news.filter(t=>t.id!==e),await this.saveData(t)}async clearAllData(){await this.saveData({users:[],theatres:[],venues:[],events:[],bookings:[],news:[]})}}let n=s.getInstance()}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[915,872,273,20],()=>a(15221));module.exports=s})();