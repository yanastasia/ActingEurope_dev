(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{489:(e,r,a)=>{Promise.resolve().then(a.bind(a,9541)),Promise.resolve().then(a.t.bind(a,7950,23))},1018:(e,r,a)=>{"use strict";a.d(r,{A:()=>o});var t=a(2149);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:r,...n,width:s,height:s,stroke:a,strokeWidth:o?24*Number(l)/Number(s):l,className:i("lucide",c),...m},[...u.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(d)?d:[d]])}),o=(e,r)=>{let a=(0,t.forwardRef)((a,n)=>{let{className:o,...c}=a;return(0,t.createElement)(l,{ref:n,iconNode:r,className:i("lucide-".concat(s(e)),o),...c})});return a.displayName="".concat(e),a}},3484:(e,r,a)=>{"use strict";a.d(r,{F:()=>n});var t=a(6522);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,i=t.$,n=(e,r)=>a=>{var t;if((null==r?void 0:r.variants)==null)return i(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:n,defaultVariants:l}=r,o=Object.keys(n).map(e=>{let r=null==a?void 0:a[e],t=null==l?void 0:l[e];if(null===r)return null;let i=s(r)||s(t);return n[e][i]}),c=a&&Object.entries(a).reduce((e,r)=>{let[a,t]=r;return void 0===t||(e[a]=t),e},{});return i(e,o,null==r?void 0:null===(t=r.compoundVariants)||void 0===t?void 0:t.reduce((e,r)=>{let{class:a,className:t,...s}=r;return Object.entries(s).every(e=>{let[r,a]=e;return Array.isArray(a)?a.includes({...l,...c}[r]):({...l,...c})[r]===a})?[...e,a,t]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},9217:(e,r,a)=>{"use strict";a.d(r,{hO:()=>o,sG:()=>l});var t=a(2149),s=a(4632),i=a(8050),n=a(8081),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,i.TL)(`Primitive.${r}`),s=t.forwardRef((e,t)=>{let{asChild:s,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(s?a:r,{...i,ref:t})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{});function o(e,r){e&&s.flushSync(()=>e.dispatchEvent(r))}},9541:(e,r,a)=>{"use strict";a.d(r,{AuthForm:()=>b});var t=a(8081),s=a(2149),i=a(9651),n=a(7950),l=a.n(n),o=a(1018);let c=(0,o.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),d=(0,o.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var u=a(2184),m=a(5160),h=a(900),p=a(588),f=a(6810),x=a(5844),g=a(3688),v=a(3345);let w=(0,v.createServerReference)("60e4619786938df91bf8c2db67ade356549385d02b",v.callServer,void 0,v.findSourceMapURL,"sendVerificationEmailAction");var y=a(8539),j=a(452);function b(e){let{type:r}=e,a=(0,i.useRouter)(),{toast:n}=(0,x.dj)(),{t:o}=(0,j.o)(),[v,b]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[S,P]=(0,s.useState)(!1),[E,C]=(0,s.useState)({name:"",email:"",password:"",confirmPassword:""}),[A,F]=(0,s.useState)(null);s.useEffect(()=>{F(y.V.getInstance())},[]);let L=e=>{let{name:r,value:a}=e.target;C(e=>({...e,[r]:a}))},R=async e=>{if(e.preventDefault(),b(!0),!A){n({title:"Error",description:"Database not initialized. Please try again.",variant:"destructive"}),b(!1);return}try{if("signup"===r&&E.password!==E.confirmPassword)throw Error("Passwords do not match");if(console.log("Form Data:",E),"signup"===r){if((await A.getUsers()).find(e=>e.email===E.email))throw Error("Email already in use");let e={id:Math.random().toString(36).substring(2,15),email:E.email,password:E.password,role:"user",emailVerified:!1};A.addUser(e);let r=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);if(!(await w(E.email,r)).success)throw Error("Failed to send verification email. Please try again.");P(!0),n({title:"Verification email sent",description:"Please check your email to verify your account."}),a.push("/verify-email");return}{console.log("Form Data:",E);let e=(await A.getUsers()).find(e=>e.email===E.email);if(console.log("User found:",e),!e){console.log("No user found with this email."),n({title:"Login Failed",description:"No user found with this email.",variant:"destructive"});return}if(console.log("Comparing passwords:",E.password,e.password),e.password!==E.password){console.log("Incorrect password."),n({title:"Login Failed",description:"Incorrect password.",variant:"destructive"});return}(0,g.Ee)(e.email,e.role);let r=(0,g.qc)();if(n({title:"Logged in successfully",description:"Welcome back to Acting Europe".concat(r?" as Administrator":"","!")}),r){a.push("/admin");return}a.push("/");return}}catch(e){n({title:"Error",description:e instanceof Error?e.message:"Something went wrong",variant:"destructive"})}finally{b(!1)}};return S?(0,t.jsxs)(f.Zp,{className:"mx-auto w-full max-w-md border-primary-gold/20 shadow-md",children:[(0,t.jsxs)(f.aR,{children:[(0,t.jsx)(f.ZB,{className:"text-2xl font-bold text-secondary-blue",children:"Verification Email Sent"}),(0,t.jsx)(f.BT,{children:"Please check your email to complete your registration"})]}),(0,t.jsxs)(f.Wu,{className:"text-center",children:[(0,t.jsx)("div",{className:"mb-6 rounded-full bg-green-100 p-3 inline-block",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("p",{className:"mb-4",children:["We've sent a verification email to ",(0,t.jsx)("strong",{children:E.email})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"Please click the verification link in the email to complete your registration. The link will expire in 24 hours."}),(0,t.jsx)(m.$,{variant:"outline",onClick:()=>a.push("/"),children:"Return to Home"}),(0,t.jsx)(m.$,{variant:"destructive",onClick:()=>null==A?void 0:A.clearAllData(),className:"mt-4",children:"Clear All Data (for testing)"})]}),(0,t.jsx)(f.wL,{className:"flex flex-col space-y-4",children:(0,t.jsxs)("div",{className:"text-center text-sm",children:["Didn't receive the email?"," ",(0,t.jsx)("button",{className:"font-medium text-primary-gold hover:underline",onClick:async()=>{b(!0);try{let e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);await w(E.email,e),n({title:"Verification email resent",description:"Please check your email to verify your account."})}catch(e){n({title:"Error",description:"Failed to resend verification email. Please try again.",variant:"destructive"})}finally{b(!1)}},disabled:v,children:v?"Sending...":"Resend verification email"})]})})]}):(0,t.jsxs)(f.Zp,{className:"mx-auto w-full max-w-md border-primary-gold/20 shadow-md",children:[(0,t.jsxs)(f.aR,{children:[(0,t.jsx)(f.ZB,{className:"text-2xl font-bold text-secondary-blue",children:"login"===r?"Sign In":"Create Account"}),(0,t.jsx)(f.BT,{children:"login"===r?"Enter your credentials to access your account":"Register to book tickets and access exclusive content"})]}),(0,t.jsx)(f.Wu,{children:(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:["signup"===r&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"name",children:"Full Name"}),(0,t.jsx)(h.p,{id:"name",name:"name",placeholder:"John Doe",value:E.name,onChange:L,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(h.p,{id:"email",name:"email",type:"email",placeholder:"you@example.com",value:E.email,onChange:L,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"password",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.p,{id:"password",name:"password",type:N?"text":"password",placeholder:"••••••••",value:E.password,onChange:L,required:!0}),(0,t.jsxs)(m.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0",onClick:()=>k(!N),children:[N?(0,t.jsx)(c,{className:"h-4 w-4"}):(0,t.jsx)(d,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:N?"Hide password":"Show password"})]})]})]}),"signup"===r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,t.jsx)(h.p,{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"••••••••",value:E.confirmPassword,onChange:L,required:!0})]}),(0,t.jsx)("p",{className:"text-[0.5rem] text-muted-foreground text-center mt-4",children:o("signupDisclaimer")})]}),(0,t.jsx)(m.$,{type:"submit",className:"w-full",disabled:v,children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4 animate-spin"}),"login"===r?"Signing in...":"Creating account..."]}):"login"===r?"Sign In":"Create Account"})]})}),(0,t.jsx)(f.wL,{className:"flex flex-col space-y-4",children:(0,t.jsx)("div",{className:"text-center text-sm",children:"login"===r?(0,t.jsxs)(t.Fragment,{children:["Don't have an account?"," ",(0,t.jsx)(l(),{href:"/auth/signup",className:"font-medium text-primary-gold hover:underline",children:"Sign up"})]}):(0,t.jsxs)(t.Fragment,{children:["Already have an account?"," ",(0,t.jsx)(l(),{href:"/auth/login",className:"font-medium text-primary-gold hover:underline",children:"Sign in"})]})})})]})}},9651:(e,r,a)=>{"use strict";var t=a(4571);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})}}]);