(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{1836:(e,t,a)=>{Promise.resolve().then(a.bind(a,3398))},3398:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(8081),r=a(2149),i=a(9651),n=a(7950),o=a.n(n),l=a(2184),d=a(6955),c=a(4535),u=a(5160),m=a(6810),g=a(8539);a(8461);let f={};async function h(e){return f[e]}async function v(e){delete f[e]}async function p(e){let t=await h(e);if(!t)return{success:!1,message:"Invalid verification token"};if(new Date>t.expires)return await v(e),{success:!1,message:"Verification token has expired"};let a=g.db.getUsers(),s=a.findIndex(e=>e.email===t.email);return -1===s?{success:!1,message:"User not found"}:(a[s].emailVerified=!0,g.db.updateUser(a[s]),await v(e),{success:!0,email:t.email,role:a[s].role})}var x=a(3688);function w(){let e=(0,i.useRouter)(),t=(0,i.useSearchParams)().get("token"),[a,n]=(0,r.useState)("loading"),[g,f]=(0,r.useState)(""),[h,v]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async function(){if(!t){n("error"),f("No verification token provided");return}try{let e=await p(t);if(e.success){if(n("success"),v(e.email||""),e.email){let t=e.role||"client";(0,x.Ee)(e.email,t)}}else n("error"),f(e.message||"Verification failed")}catch(e){n("error"),f("An error occurred during verification"),console.error("Verification error:",e)}})()},[t]),(0,s.jsx)("div",{className:"container flex min-h-[calc(100vh-4rem)] flex-col items-center justify-center py-12",children:(0,s.jsxs)(m.Zp,{className:"mx-auto w-full max-w-md border-primary-gold/20 shadow-md",children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsx)(m.ZB,{className:"text-2xl font-bold text-secondary-blue",children:"Email Verification"}),(0,s.jsx)(m.BT,{children:"loading"===a?"Verifying your email address...":"success"===a?"Your email has been verified":"Verification failed"})]}),(0,s.jsx)(m.Wu,{className:"text-center",children:"loading"===a?(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)(l.A,{className:"mx-auto h-12 w-12 animate-spin text-primary-gold"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Please wait while we verify your email address..."})]}):"success"===a?(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)(d.A,{className:"mx-auto h-12 w-12 text-green-500"}),(0,s.jsx)("p",{className:"mt-4",children:"Your email address has been successfully verified!"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"You can now access all features of the Acting Europe platform."})]}):(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsx)(c.A,{className:"mx-auto h-12 w-12 text-red-500"}),(0,s.jsx)("p",{className:"mt-4",children:"Verification failed"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:g})]})}),(0,s.jsx)(m.wL,{className:"flex justify-center",children:"loading"===a?(0,s.jsx)(u.$,{disabled:!0,children:"Please wait..."}):"success"===a?(0,s.jsx)(u.$,{onClick:()=>e.push("/profile"),children:"Go to Your Profile"}):(0,s.jsx)(u.$,{variant:"outline",asChild:!0,children:(0,s.jsx)(o(),{href:"/auth/signup",children:"Return to Sign Up"})})})]})})}},3688:(e,t,a)=>{"use strict";function s(){return"true"===localStorage.getItem("actingEurope_auth")}function r(){let e=localStorage.getItem("actingEurope_userRole");return"admin"===e||"super_admin"===e}function i(e,t){localStorage.setItem("actingEurope_auth","true"),localStorage.setItem("actingEurope_userEmail",e),localStorage.setItem("actingEurope_userRole",t),window.dispatchEvent(new Event("user-logged-in"))}function n(){localStorage.removeItem("actingEurope_auth"),localStorage.removeItem("actingEurope_userEmail"),localStorage.removeItem("actingEurope_userRole"),window.dispatchEvent(new Event("user-logged-out"))}a.d(t,{Ee:()=>i,cy:()=>n,qc:()=>r,wR:()=>s})},5160:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(8081),r=a(2149),i=a(8050),n=a(3484),o=a(7687);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},6810:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var s=a(8081),r=a(2149),i=a(7687);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},7687:(e,t,a)=>{"use strict";a.d(t,{cn:()=>i});var s=a(6522),r=a(4483);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},8539:(e,t,a)=>{"use strict";a.d(t,{db:()=>r});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}initializeDatabase(){if(!localStorage.getItem(this.storageKey)){let e={events:[],venues:[{id:"venue-1",name:"Main Stage",description:"Main performance venue with regular and balcony seating",rows:Array.from({length:16},(e,t)=>({rowNumber:t+1,seatCount:6===t?0:20+Math.floor(10*Math.random())}))},{id:"venue-2",name:"Chamber Stage",description:"Intimate performance space for smaller productions",rows:[{rowNumber:1,seatCount:12},{rowNumber:2,seatCount:13},{rowNumber:3,seatCount:14},{rowNumber:4,seatCount:13},{rowNumber:5,seatCount:13},{rowNumber:6,seatCount:13},{rowNumber:7,seatCount:9},{rowNumber:8,seatCount:9}]}],bookings:[],users:[{id:"anastasia-admin",email:"anastasia@actingeurope.eu",password:"ActingEurope2025!",role:"super_admin",emailVerified:!0},{id:"toni-admin",email:"toni@actingeurope.eu",password:"ActingEurope2025!",role:"super_admin",emailVerified:!0}],news:[]};this.saveData(e)}}getData(){let e=localStorage.getItem(this.storageKey);if(e)try{return JSON.parse(e)}catch(e){console.error("Error parsing database data:",e)}return{events:[],venues:[],bookings:[],users:[],news:[]}}saveData(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("databaseUpdated",{detail:e}))}catch(e){console.error("Error saving database data:",e)}}getEvents(){return this.getData().events}addEvent(e){let t=this.getData();t.events.push(e),this.saveData(t)}updateEvent(e,t){let a=this.getData(),s=a.events.findIndex(t=>t.id===e);-1!==s&&(a.events[s]=t,this.saveData(a))}deleteEvent(e){let t=this.getData();t.events=t.events.filter(t=>t.id!==e),this.saveData(t)}getVenues(){return this.getData().venues}addVenue(e){let t=this.getData();t.venues.push(e),this.saveData(t)}updateVenue(e,t){let a=this.getData(),s=a.venues.findIndex(t=>t.id===e);-1!==s&&(a.venues[s]=t,this.saveData(a))}deleteVenue(e){let t=this.getData();t.venues=t.venues.filter(t=>t.id!==e),this.saveData(t)}getBookings(){return this.getData().bookings}addBooking(e){let t=this.getData();t.bookings.push(e),this.saveData(t)}getUsers(){return this.getData().users}addUser(e){let t=this.getData();t.users.push(e),this.saveData(t)}getNews(){return this.getData().news}addNews(e){let t=this.getData();t.news.push(e),this.saveData(t)}clearAllData(){localStorage.removeItem(this.storageKey),this.initializeDatabase(),console.log("All database data cleared and reinitialized.")}updateUser(e){let t=this.getData(),a=t.users.findIndex(t=>t.id===e.id);-1!==a&&(t.users[a]=e,this.saveData(t))}constructor(){this.storageKey="actingEurope_database",this.initializeDatabase()}}let r=s.getInstance()}},e=>{var t=t=>e(e.s=t);e.O(0,[82,687,950,640,497,954,358],()=>t(1836)),_N_E=e.O()}]);